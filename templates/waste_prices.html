<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Manage Pastry Prices</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='waste.css') }}">
</head>
<body>

<header class="page-header">
  <a href="{{ url_for('waste_log') }}" class="back-link">← Back to Daily Waste Log</a>
  <h1>Manage Pastry Prices</h1>
  <p class="page-subtitle">Update items and prices without changing code.</p>
</header>

<section class="card waste-card">
  <table class="waste-table" id="priceTable">
    <thead>
      <tr>
        <th>Item</th>
        <th class="qty-col">Price</th>
        <th class="active-col">Active</th>
        <th></th>
      </tr>
    </thead>
    <tbody id="priceRows">
      {% for r in items %}
      <tr>
        <td><input class="price-name" type="text" value="{{ r.name }}" /></td>
        <td class="qty-col"><input class="price-value" type="number" step="0.01" min="0" value="{{ r.price }}" /></td>
        <td class="active-col">
          <label class="active-toggle-wrap">
            <input
              type="checkbox"
              class="price-active"
              {% if r.active is not defined or r.active %}checked{% endif %}
            />
            <span class="active-label">Active</span>
          </label>
        </td>
        <td><button type="button" class="remove-row" aria-label="Remove row">✕</button></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="waste-actions">
    <button type="button" class="secondary-btn" id="addPriceRow">+ Add item</button>

    <div class="save-wrap">
      <button type="button" class="primary-btn" id="savePrices">Save Prices</button>
      <span id="pricesStatus" class="save-status" role="status" aria-live="polite"></span>
    </div>
  </div>
</section>

<template id="priceRowTemplate">
  <tr>
    <td><input class="price-name" type="text" value="" placeholder="New item name" /></td>
    <td class="qty-col"><input class="price-value" type="number" step="0.01" min="0" value="0.00" /></td>
    <td class="active-col">
      <label class="active-toggle-wrap">
        <input type="checkbox" class="price-active" checked />
        <span class="active-label">Active</span>
      </label>
    </td>
    <td><button type="button" class="remove-row" aria-label="Remove row">✕</button></td>
  </tr>
</template>

<script src="{{ url_for('static', filename='waste_prices.js') }}"></script>
</body>
</html>
